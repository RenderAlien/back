syntax = "proto3";

package order;


service Order {

	rpc GetCart (GetCartRequest) returns (GetCartResponse);

    rpc GetFromCart (GetFromCartRequest) returns (Product);

    rpc AddToCart (AddToCartRequest) returns (SuccessResponse);

	rpc DeleteFromCart (DeleteFromCartRequest) returns (SuccessResponse);

    rpc UpdateWithinCart (UpdateWithinCartRequest) returns (SuccessResponse);

    rpc BuyFromCart (BuyFromCartRequest) returns (SuccessResponse);

    rpc GetUserOrders (GetUserOrdersRequest) returns (Orders);

    rpc GetOrder (GetOrderRequest) returns (OrderResponse);
    
    rpc UpdateOrder(UpdateOrderRequest) returns (Empty);
    
}

message Empty {}

message Product {
    string cart_product_id = 1;
    string product_id = 2;
    int32 quantity = 3;
}

message GetCartRequest {
    string uid = 1;
}

message GetFromCartRequest {
    string uid = 1;
    string cart_product_id = 2;
}

message AddToCartRequest {
    string uid = 1;
    string product_id = 2;
    int32 quantity = 3;
}

message DeleteFromCartRequest {
    string uid = 1;
    string cart_product_id = 2;
}

message UpdateWithinCartRequest {
    string uid = 1;
    string cart_product_id = 2;
    int32 quantity = 3; // по сути обновлять (изменять) мы можем только количество в корзине
}

message BuyFromCartRequest {
    string uid = 1;
    string cart_product_id = 2;
    string bank_details = 3;
}

message UpdateOrderRequest {
    string order_id = 1;
    string status = 2;
}

message GetUserOrdersRequest{
    string uid = 1;
}

message GetOrderRequest {
    string order_id = 1;
}

//

message GetCartResponse {
    repeated Product products = 1;
}

message SuccessResponse {
    bool success = 1;
}

message OrderResponse {
    string order_id = 1;
    string uid = 2;
    string product_id = 3;
    int32 quantity = 4;
    float price = 5;
    string bank_details = 6;
    string status = 7;
}

message Orders {
    repeated OrderResponse orders = 1;
}